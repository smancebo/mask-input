!function(r){function t(r){function t(r,t,a,o){function l(r){var t=e(r,a.mask);return void 0===t?($(f).attr("valida-control",!1),r):($(f).attr("valida-control",!0),t)}function u(r){var t=n(r,a.mask);return t}var v=a.mask,f=$(t);o.$formatters.push(l),o.$parsers.push(u),$(f).unbind("keydown"),$(f).unbind("change"),$(f).on("change",function(t){var i=$(this).val(),o=e(i,a.mask);$(f).val(o),r.ngModel=n($(this).val(),a.mask)}),$(f).on("keydown",function(t){$(f).attr("valida-control",!0);var e=$(this).val().length,o=String.fromCharCode(t.keyCode);if(8!=t.keyCode&&9!=t.keyCode&&17!=t.keyCode&&91!=t.keyCode){t.preventDefault();var l=i(v,e,o);if(void 0===l)return;l===!0?r.$apply(function(){f.val((f.val()+o).trim()),r.ngModel=n(f.val(),a.mask)}):l!==!1?r.$apply(function(){f.val((f.val()+l).trim()),r.ngModel=n(f.val(),a.mask)}):($(f).attr("valida-control",!1),r.ngModel=n(f.val(),a.mask))}})}function e(r,t){var e="";if(void 0!==r)for(var n=0;n<=r.length-1;n++){var a=i(t,e.length,r[n]);if(void 0===a)return;if(a===!0)e=(e+r[n]).trim();else{if(a===!1)return;e=(e+a).trim()}}return e}function n(r,t){var e="";if(void 0!==r){e=r;for(var n=0;n<=r.length;n++){var a=t[n];"#"!==a&&"@"!==a&&"0"!==a&&0!==a&&(e=e.replace(a,""))}}return e.trim()}function a(r,t){return"#"===r?o.alphaNumber.test(t):"@"===r?o.letter.test(t):"0"!==r&&0!==r||o.numbers.test(t)}function i(r,t,e){var n=r[t];if(void 0!==n){if("#"==n)return o.alphaNumber.test(e);if("@"===n)return o.letter.test(e);if(0===n||"0"===n)return o.numbers.test(e);var i=1,l=r[t+i];if(a(l,e)){for(var u=n;"#"!==l&&0!==l&&"0"!==l&&"@"!==l;)u+=l,i+=1,l=r[t+i];return u+e}}}var o={alphaNumber:/[a-zA-Z0-9-_ ]/,numbers:/[0-9]/,letter:/[a-zA-Z]/};return{restrict:"A",require:"ngModel",link:t,scope:{ngModel:"="}}}r.module("safe.mask-text",[]).directive("mask",t),t.$inject=["$timeout"]}(window.angular);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNhZmUubWFzay10ZXh0LmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtYXNrVGV4dCIsIiR0aW1lb3V0IiwibGlua0Z1bmMiLCIkc2NvcGUiLCIkZWxlbWVudCIsIiRhdHRyIiwiJG5nTW9kZWwiLCJmb3JtYXR0ZXIiLCJ2YWx1ZSIsImZtdCIsImZvcm1hdCIsIm1hc2siLCJ1bmRlZmluZWQiLCIkIiwiaW5wdXQiLCJhdHRyIiwicGFyc2VyIiwicGFyc2VkIiwicGFyc2UiLCIkZm9ybWF0dGVycyIsInB1c2giLCIkcGFyc2VycyIsInVuYmluZCIsIm9uIiwiZXZlbnQiLCJkYXRhIiwidGhpcyIsInZhbCIsImYiLCJuZ01vZGVsIiwiY2hhckxlbmd0aCIsImxlbmd0aCIsImNoYXIiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJrZXlDb2RlIiwicHJldmVudERlZmF1bHQiLCJtYXNrUmVzdWx0IiwiZXZhbE1hc2siLCIkYXBwbHkiLCJ0cmltIiwiZm9ybWF0dGVkIiwiaSIsIm1hc2tUeXBlIiwicmVwbGFjZSIsIm1hdGNoVHlwZSIsIm1hc2tNYXRjaCIsImFscGhhTnVtYmVyIiwidGVzdCIsImxldHRlciIsIm51bWJlcnMiLCJtYXNrQ2hhciIsIm5leHRDaGFyIiwicmV0Q2hhciIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsIm1vZHVsZSIsImRpcmVjdGl2ZSIsIiRpbmplY3QiLCJ3aW5kb3ciXSwibWFwcGluZ3MiOiJDQUFBLFNBQVVBLEdBUU4sUUFBU0MsR0FBU0MsR0FDZCxRQUFTQyxHQUFTQyxFQUFRQyxFQUFVQyxFQUFPQyxHQUt2QyxRQUFTQyxHQUFVQyxHQUNmLEdBQUlDLEdBQU1DLEVBQU9GLEVBQU9ILEVBQU1NLEtBQzlCLE9BQVlDLFVBQVJILEdBQ0FJLEVBQUVDLEdBQU9DLEtBQUssa0JBQWtCLEdBQ3pCUCxJQUVQSyxFQUFFQyxHQUFPQyxLQUFLLGtCQUFrQixHQUN6Qk4sR0FJZixRQUFTTyxHQUFPUixHQUNkLEdBQUlT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QUFLaEIsRUFDL0IsSUFBaUIsTUFBYm1CLEVBRVAsTUFBT0wsR0FBVUcsT0FBT0QsS0FBS2hCLEVBQzFCLElBQWlCLElBQWJtQixHQUErQixNQUFiQSxFQUV6QixNQUFPTCxHQUFVSSxRQUFRRixLQUFLaEIsRUFHOUIsSUFBSVUsR0FBSSxFQUVKVSxFQUFXekMsRUFBS21CLEVBQWFZLEVBRWpDLElBQUlHLEVBQVVPLEVBQVVwQixHQUFPLENBSTNCLElBRkEsR0FBSXFCLEdBQVVGLEVBRU0sTUFBYkMsR0FBaUMsSUFBYkEsR0FBK0IsTUFBYkEsR0FBaUMsTUFBYkEsR0FDN0RDLEdBQVdELEVBQ1hWLEdBQUssRUFDTFUsRUFBV3pDLEVBQUttQixFQUFhWSxFQUdqQyxPQUFPVyxHQUFVckIsSUF2RDdCLEdBQUljLElBQ0FDLFlBQWEsaUJBQ2JHLFFBQVMsUUFDVEQsT0FBUSxXQTREWixRQUNJSyxTQUFVLElBQ1ZDLFFBQVMsVUFDVEMsS0FBTXRELEVBQ051RCxPQUNFNUIsUUFBUyxNQWpMbkI5QixFQUFRMkQsT0FBTyxxQkFDVkMsVUFBVSxPQUFRM0QsR0FFdkJBLEVBQVM0RCxTQUFXLGFBb0xyQkMsT0FBTzlEIiwiZmlsZSI6InNhZmUubWFzay10ZXh0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhbmd1bGFyKSB7XG5cblxuICAgIGFuZ3VsYXIubW9kdWxlKCdzYWZlLm1hc2stdGV4dCcsIFtdKVxuICAgICAgICAuZGlyZWN0aXZlKCdtYXNrJywgbWFza1RleHQpO1xuXG4gICAgbWFza1RleHQuJGluamVjdCA9IFsnJHRpbWVvdXQnXTtcblxuICAgIGZ1bmN0aW9uIG1hc2tUZXh0KCR0aW1lb3V0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGxpbmtGdW5jKCRzY29wZSwgJGVsZW1lbnQsICRhdHRyLCAkbmdNb2RlbCkge1xuXG4gICAgICAgICAgICB2YXIgbWFzayA9ICRhdHRyLm1hc2s7XG4gICAgICAgICAgICB2YXIgaW5wdXQgPSAkKCRlbGVtZW50KTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZm9ybWF0dGVyKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZtdCA9IGZvcm1hdCh2YWx1ZSwgJGF0dHIubWFzayk7XG4gICAgICAgICAgICAgICAgaWYgKGZtdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICQoaW5wdXQpLmF0dHIoJ3ZhbGlkYS1jb250cm9sJywgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgJChpbnB1dCkuYXR0cigndmFsaWRhLWNvbnRyb2wnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZtdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHBhcnNlcih2YWx1ZSkge1xuICAgICAgICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2UodmFsdWUsICRhdHRyLm1hc2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRuZ01vZGVsLiRmb3JtYXR0ZXJzLnB1c2goZm9ybWF0dGVyKTtcbiAgICAgICAgICAgICRuZ01vZGVsLiRwYXJzZXJzLnB1c2gocGFyc2VyKTtcblxuICAgICAgICAgICAgJChpbnB1dCkudW5iaW5kKCdrZXlkb3duJyk7XG4gICAgICAgICAgICAkKGlucHV0KS51bmJpbmQoJ2NoYW5nZScpO1xuXG4gICAgICAgICAgICAkKGlucHV0KS5vbignY2hhbmdlJywgZnVuY3Rpb24oZXZlbnQpe1xuICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICAgIHZhciBmID0gZm9ybWF0KGRhdGEsICRhdHRyLm1hc2spO1xuICAgICAgICAgICAgICAkKGlucHV0KS52YWwoZik7XG4gICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gcGFyc2UoJCh0aGlzKS52YWwoKSwgJGF0dHIubWFzayk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoaW5wdXQpLm9uKCdrZXlkb3duJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAkKGlucHV0KS5hdHRyKCd2YWxpZGEtY29udHJvbCcsIHRydWUpO1xuICAgICAgICAgICAgICAgIHZhciBjaGFyTGVuZ3RoID0gJCh0aGlzKS52YWwoKS5sZW5ndGg7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSAvW2EtekEtWjAtOS1fIF0vO1xuICAgICAgICAgICAgICAgIHZhciBjaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZShldmVudC5rZXlDb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSAhPSA4ICYmIGV2ZW50LmtleUNvZGUgIT0gOSAmJiBldmVudC5rZXlDb2RlICE9IDE3ICYmIGV2ZW50LmtleUNvZGUgIT0gOTEpIHtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXNrUmVzdWx0ID0gZXZhbE1hc2sobWFzaywgY2hhckxlbmd0aCwgY2hhcik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXNrUmVzdWx0ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2tSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWwoKGlucHV0LnZhbCgpICsgY2hhcikudHJpbSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gcGFyc2UoaW5wdXQudmFsKCksICRhdHRyLm1hc2spO1xuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWFza1Jlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kYXBwbHkoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQudmFsKChpbnB1dC52YWwoKSArIG1hc2tSZXN1bHQpLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gcGFyc2UoaW5wdXQudmFsKCksICRhdHRyLm1hc2spO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKGlucHV0KS5hdHRyKCd2YWxpZGEtY29udHJvbCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5uZ01vZGVsID0gcGFyc2UoaW5wdXQudmFsKCksICRhdHRyLm1hc2spO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZvcm1hdCh2YWx1ZSwgbWFzaykge1xuICAgICAgICAgICAgdmFyIGZvcm1hdHRlZCA9ICcnO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8PSB2YWx1ZS5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tSZXN1bHQgPSBldmFsTWFzayhtYXNrLCBmb3JtYXR0ZWQubGVuZ3RoLCB2YWx1ZVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXNrUmVzdWx0ID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hc2tSZXN1bHQgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdHRlZCA9IChmb3JtYXR0ZWQgKyB2YWx1ZVtpXSkudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1hc2tSZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWQgPSAoZm9ybWF0dGVkICsgbWFza1Jlc3VsdCkudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9pbnZhbGlkIHZhbHVlIGZvciB0aGUgbWFza1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXJzZSh2YWx1ZSwgbWFzaykge1xuICAgICAgICAgICAgdmFyIHBhcnNlZCA9ICcnO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcblxuICAgICAgICAgICAgICAgIHBhcnNlZCA9IHZhbHVlO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hc2tUeXBlID0gbWFza1tpXTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAobWFza1R5cGUgIT09ICcjJyAmJiBtYXNrVHlwZSAhPT0gJ0AnICYmIG1hc2tUeXBlICE9PSAnMCcgJiYgbWFza1R5cGUgIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IHBhcnNlZC5yZXBsYWNlKG1hc2tUeXBlLCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJzZWQudHJpbSgpO1xuICAgICAgICB9XG5cblxuICAgICAgICB2YXIgbWFza01hdGNoID0ge1xuICAgICAgICAgICAgYWxwaGFOdW1iZXI6IC9bYS16QS1aMC05LV8gXS8sXG4gICAgICAgICAgICBudW1iZXJzOiAvWzAtOV0vLFxuICAgICAgICAgICAgbGV0dGVyOiAvW2EtekEtWl0vXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gbWF0Y2hUeXBlKG1hc2tUeXBlLCBjaGFyKSB7XG4gICAgICAgICAgICAvL0NoZWNrIGlmIGEgY2hhcmFjdGVyIG1hdGNoIGEgZGVzaXJlZCBtYXNrIHR5cGVcblxuICAgICAgICAgICAgaWYgKG1hc2tUeXBlID09PSAnIycpIHtcbiAgICAgICAgICAgICAgICAvL21hdGNoIEFscGhhbnVtZXJpY3NcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFza01hdGNoLmFscGhhTnVtYmVyLnRlc3QoY2hhcik7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hc2tUeXBlID09PSAnQCcpIHtcbiAgICAgICAgICAgICAgICAvL01hdGNoIExldHRlcnNcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFza01hdGNoLmxldHRlci50ZXN0KGNoYXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXNrVHlwZSA9PT0gJzAnIHx8IG1hc2tUeXBlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hc2tNYXRjaC5udW1iZXJzLnRlc3QoY2hhcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXZhbE1hc2sobWFzaywgY2hhckxlbmd0aCwgY2hhcikge1xuXG4gICAgICAgICAgICAvL0dldCB0aGUgbWFzayBjaGFyIGF0IHRoZSBpbnB1dCB0ZXh0IHBvc2l0aW9uXG4gICAgICAgICAgICB2YXIgbWFza0NoYXIgPSBtYXNrW2NoYXJMZW5ndGhdO1xuICAgICAgICAgICAgLy9HZXQgVGhlIHN0cmluZyBsZXR0ZXIgb2YgdGhlIGNoYXIgY29kZVxuXG4gICAgICAgICAgICBpZiAobWFza0NoYXIgPT09IHVuZGVmaW5lZCkgcmV0dXJuIHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgaWYgKG1hc2tDaGFyID09ICcjJykgeyAvL0FjY2VwdHMgTnVtYmVycyBhbmQgTGV0dGVyc1xuICAgICAgICAgICAgICAgIC8vbWF0Y2ggdGhlIGtleWNvZGUgY2hhciB3aXRoIGFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hc2tNYXRjaC5hbHBoYU51bWJlci50ZXN0KGNoYXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXNrQ2hhciA9PT0gJ0AnKSB7IC8vQWNjZXB0cyBPbmx5IExldHRlcnNcbiAgICAgICAgICAgICAgICAvL21hdGNoIHRoZSBrZXljb2RlIGNoYXIgd2l0aCBMZXR0ZXJzIGNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgICByZXR1cm4gbWFza01hdGNoLmxldHRlci50ZXN0KGNoYXIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChtYXNrQ2hhciA9PT0gMCB8fCBtYXNrQ2hhciA9PT0gJzAnKSB7IC8vQWNjZXB0cyBPbmx5IE51bWJlcnNcbiAgICAgICAgICAgICAgICAvL21hdGNoIHRoZSBrZXljb2RlIGNoYXIgd2l0aCBudW1iZXJzXG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hc2tNYXRjaC5udW1iZXJzLnRlc3QoY2hhcik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vSWYgdGhlIGNoYXIgZG9lcyBub3QgbWF0Y2ggYW55IHBhdHRlcm4gdGhlbiBpcyBhIHNwZWNpYWwgY2FyYWN0ZXIgaW4gdGhlIG1hc2tcbiAgICAgICAgICAgICAgICB2YXIgaSA9IDE7XG4gICAgICAgICAgICAgICAgLy9HZXQgdGhlIG5leHQgY2hhciBpbiB0aGUgbWFzazsgdGhpcyBpcyB1c2VkIGZvciBnZXQgYWxsIHRoZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdGhlIG1hc2sgcGF0dGVyblxuICAgICAgICAgICAgICAgIHZhciBuZXh0Q2hhciA9IG1hc2tbY2hhckxlbmd0aCArIGldO1xuICAgICAgICAgICAgICAgIC8vY2hlY2sgd2hhdGV2ZXIgdGhlIGtleWNvZGUgbWF0Y2ggdGhlIG5leHQgbWFzayBjaGFyYWN0ZXJcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hUeXBlKG5leHRDaGFyLCBjaGFyKSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXRDaGFyID0gbWFza0NoYXI7XG4gICAgICAgICAgICAgICAgICAgIC8vbG9vcCB0aHJvdWdoIHNwZWNpYWwgY2FyYWN0ZXJzIGNvbmNhdGVuYXRlIHdpdGggdGhlIGtleUNvZGVcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG5leHRDaGFyICE9PSAnIycgJiYgbmV4dENoYXIgIT09IDAgJiYgbmV4dENoYXIgIT09ICcwJyAmJiBuZXh0Q2hhciAhPT0gJ0AnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRDaGFyICs9IG5leHRDaGFyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENoYXIgPSBtYXNrW2NoYXJMZW5ndGggKyBpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXRDaGFyICsgY2hhcjtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvL2tleWNvZGUgZG9zZW50IG1hdGNoIHRoZSBuZXh0IGNoYXJhY3RlciByZXR1cm4gdW5kZWZpbmVkIGFuZCBubyB0ZXh0IGlzIGVudGVyZWRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgICAgIHJlcXVpcmU6ICduZ01vZGVsJyxcbiAgICAgICAgICAgIGxpbms6IGxpbmtGdW5jLFxuICAgICAgICAgICAgc2NvcGU6e1xuICAgICAgICAgICAgICBuZ01vZGVsIDonPSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cblxufSkod2luZG93LmFuZ3VsYXIpO1xuIl19
